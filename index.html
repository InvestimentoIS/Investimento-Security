<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investimento Security</title>
    <link rel="stylesheet" href="Pasta CSS/index.css"> <!-- Removi espaço no caminho -->
</head>
<body>

    <!-- Cabeçalho -->
    <header>
        <!-- Para Usuários Não Logados -->
        <nav class="navbar" id="header-nao-logado">
            <div class="logo">
                <h1><a href="index.html">Investimento Security</a></h1>
            </div>
            <div class="menu-icon" id="menu-icon">
                <img src="Fotos/menu preto.png" alt="Menu">
            </div>
            <ul class="nav-list" id="nav-list-nao-logado">
                <li><a href="index.html">Início</a></li>
                <li><a href="acoes.html">Ações</a></li>
                <li><a href="investidores.html">Investidores</a></li>
                <li><a href="contato.html">Contato</a></li>
                <li><a href="login.html">Login</a></li>
                <li><a href="register.html" class="cadastro-button">Cadastrar</a></li>
            </ul>
        </nav>

        <!-- Para Usuários Logados -->
        <nav class="navbar" id="header-logado" style="display: none;">
            <div class="logo">
                <h1><a href="dashboard.html">Investimento Security</a></h1>
            </div>
            <div class="menu-icon" id="menu-icon">
                <img src="Fotos/menu_preto.png" alt="Menu">
            </div>
            <ul class="nav-list" id="nav-list-logado">
                <li><a href="dashboard.html">Dashboard</a></li>

                <!-- Submenu de Investimentos -->
                <li class="dropdown">
                    <a href="#">Investimentos</a>
                    <ul class="dropdown-menu">
                        <li><a href="acoes-garantidas.html">Ações Garantidas</a></li>
                        <li><a href="acoes-nao-garantidas.html">Ações Não Garantidas</a></li>
                        <li><a href="comprar-vender.html">Vender/Comprar</a></li>
                    </ul>
                </li>

                <li><a href="depositar.html">Depósito/Saque</a></li>
                
                <!-- Notificações -->
                <li>
                    <a href="notificacoes.html">
                        <img src="Fotos/Icone de notificação 2.png" alt="Notificações" class="icone-notificacoes">
                    </a>
                </li>
                
                <li><a href="suporte.html">Suporte</a></li>
                
                <!-- Ícone do Perfil com Dropdown -->
                <li class="dropdown perfil-usuario">
                    <a href="#">
                        <img src="Fotos/Icone de perfil.png" alt="Perfil" class="icone-usuario">
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="meu-perfil.html">Perfil</a></li>
                        <li><a href="configuracoes.html">CG</a></li>
                        <li><button id="logout-btn" class="logout-button">Sair</button></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>
    <!-- Banner Inicial -->
    <section class="banner">
        <div class="banner-content">
            <h1>Invista no Futuro com Segurança e Inovação</h1>
            <div class="cta-buttons">
                <a href="register.html" class="cta-button">Cadastre-se Agora</a>
                <a href="como-funciona.html" class="cta-button">Como Funciona</a>
                <a href="acoes.html" class="cta-button">Conheça Nossas Ações</a>
            </div>
        </div>
    </section>

    <!-- Seção Nossos Diferenciais -->
    <section class="destaques">
        <h2>Nossos Diferenciais</h2>
        <div class="diferenciais">
            <div class="diferencial-item">
                <img src="Fotos/pngwing.com.png" alt="Segurança Garantida">
                <h3>Segurança Garantida</h3>
                <p>Nossos sistemas são seguros e confiáveis.</p>
            </div>
            <div class="diferencial-item">
                <img src="Fotos/Innovation_free_icons_designed_by_Freepik.jpeg" alt="Inovação"> <!-- Ajuste: Nome simplificado e sem espaços -->
                <h3>Inovações em Trading</h3>
                <p>Trabalhamos com as melhores tecnologias.</p>
            </div>
            <div class="diferencial-item">
                <img src="Fotos/24.png" alt="Suporte 24/7">
                <h3>Suporte 24/7</h3>
                <p>Suporte ao cliente disponível sempre que precisar.</p>
            </div>
        </div>
    </section>

    <!-- Seção Nossos Produtos -->
    <section class="produtos">
        <h2>Nossos Produtos</h2>
        <div class="produtos-lista">
            <div class="produto-item">
                <h3>Ações Garantidas</h3>
                <p>Invista com segurança em ações garantidas com risco baixo.</p>
                <a href="acoes-garantidas.html" class="cta-button">Ver Ações Garantidas</a>
            </div>
            <div class="produto-item">
                <h3>Ações Não Garantidas</h3>
                <p>Obtenha altos retornos com ações de maior risco.</p>
                <a href="acoes-nao-garantidas.html" class="cta-button">Ver Ações Não Garantidas</a>
            </div>
            <div class="produto-item">
                <h3>Planos de Investimento</h3>
                <p>Escolha o plano ideal para o seu perfil de investidor.</p>
                <a href="planos.html" class="cta-button">Ver Planos de Investimento</a>
            </div>
        </div>
    </section>

    <!-- Seção Nossos Parceiros -->
    <section class="parcerias">
        <h2>Nossos Parceiros</h2>
        <div class="parceiros-logos">
            <img src="Fotos/ALIEXPRESS.png" alt="Parceiro Aliexpress">
            <img src="Fotos/BINANCE.png" alt="Parceiro Binance">
            <img src="Fotos/MASTERCADR.png" alt="Parceiro Mastercard"> <!-- Ajuste: Nome da imagem corrigido -->
        </div>
        <h3>Certificações e Reconhecimentos</h3>
        <ul>
            <li>Certificação I.S</li>
            <li>Prêmio de Inovação Financeira 2024</li>
            <li>Melhor Plataforma de Investimento pela I.S Finance</li>
        </ul>
    </section>

    <!-- Seção de Chamada para Ação -->
    <section class="cta-final">
        <h2>Invista com Segurança e Inovação</h2>
        <p>Não perca tempo, junte-se a nós e transforme o seu futuro financeiro.</p>
        <a href="register.html" class="cta-button">Cadastre-se Agora</a>
    </section>

    <!-- Rodapé -->
    <footer>
        <div class="footer-container">
            <div class="footer-section about">
                <h3>Sobre Nós</h3>
                <p>Invista com confiança. Oferecemos as melhores soluções financeiras para garantir o futuro do seu patrimônio.</p>
            </div>
            <div class="footer-section links">
                <h4>Links Rápidos</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="como-funciona.html">Como Funciona</a></li>
                    <li><a href="guia-investimento.html">Guia de Investimento</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="contato.html">Contato</a></li>
                </ul>
            </div>
            <div class="footer-section legal">
                <h4>Legal</h4>
                <ul>
                    <li><a href="termos.html">Termos de Uso</a></li>
                    <li><a href="privacidade.html">Política de Privacidade</a></li>
                    <li><a href="cookies.html">Cookies</a></li>
                </ul>
            </div>
            <div class="footer-section suporte">
                <h4>Suporte</h4>
                <ul>
                    <li><a href="faq.html">FAQ</a></li>
                    <li><a href="suporte.html">Suporte Técnico</a></li>
                    <li><a href="ticket.html">Abrir um Ticket</a></li>
                </ul>
            </div>
            <div class="footer-section social">
                <h4>Siga-nos</h4>
                <div class="social-icons">
                    <a href="#"><img src="Fotos/facebook.png" alt="Facebook"></a>
                    <a href="#"><img src="Fotos/twitter.png" alt="Twitter"></a>
                    <a href="#"><img src="Fotos/linkedin.png" alt="LinkedIn"></a>
                    <a href="#"><img src="Fotos/instagram.png" alt="Instagram"></a>
                    <a href="#"><img src="Fotos/youtube.png" alt="YouTube"></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2024 Investimento Security. Todos os direitos reservados.
        </div>
    </footer>

    <script src="pasta_js/index.js"></script>

   <!-- Script para gerenciar o logout e exibição do menu -->
   <script>
    // Verifica se o usuário está logado através do token ou estado no localStorage
    const token = localStorage.getItem('authToken');

    document.addEventListener('DOMContentLoaded', function() {
        const headerLogado = document.getElementById('header-logado');
        const headerNaoLogado = document.getElementById('header-nao-logado');

        if (token) {
            // Usuário logado: exibe o menu logado e oculta o não logado
            headerLogado.style.display = 'flex';
            headerNaoLogado.style.display = 'none';

            // Chama função para buscar dados do usuário
            fetchUserProfile();

        } else {
            // Usuário não logado: exibe o menu não logado e oculta o logado
            headerLogado.style.display = 'none';
            headerNaoLogado.style.display = 'flex';
        }
    });

    // Função para buscar e exibir os dados do usuário logado (a partir do seu backend)
    async function fetchUserProfile() {
        try {
            const response = await fetch(`${backendURL}/meu-perfil`, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`, // Envia o token de autenticação
                },
                credentials: 'include' // Inclui cookies/sessões
            });

            if (!response.ok) {
                throw new Error("Não foi possível carregar os dados do perfil.");
            }

            const userData = await response.json();

            // Atualiza a interface com as informações do usuário logado
            document.getElementById('username').textContent = userData.username;
            document.getElementById('email').textContent = userData.email;
            document.getElementById('country').textContent = userData.country;
            document.getElementById('birthdate').textContent = userData.birthdate;
            document.getElementById('phone').textContent = userData.phone;
            document.getElementById('profilePhoto').src = userData.profilePhoto;

        } catch (error) {
            console.error('Erro ao carregar o perfil do usuário:', error);
            // Redireciona para a página de login se o usuário não estiver autenticado
            window.location.href = "login.html";
        }
    }

    // Função de logout: remove o token de autenticação e redireciona para a página inicial
    document.getElementById('logout-btn').addEventListener('click', function() {
        localStorage.removeItem('authToken'); // Remove o token armazenado
        window.location.href = 'index.html'; // Redireciona após logout
    });
</script>

</body>
</html>