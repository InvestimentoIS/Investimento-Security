<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investimento Security</title>
    <link rel="stylesheet" href="Pasta CSS/index.css">
</head>
<body>

    <!-- Cabeçalho -->
    <header>
        <!-- Para Usuários Não Logados -->
        <nav class="navbar" id="header-nao-logado">
            <div class="logo">
                <h1><a href="index.html">Investimento Security</a></h1>
            </div>
            <div class="menu-icon" id="menu-icon">
                <img src="Fotos/menu preto.png" alt="Menu">
            </div>
            <ul class="nav-list" id="nav-list-nao-logado">
                <li><a href="index.html">Início</a></li>
                <li><a href="acoes.html">Ações</a></li>
                <li><a href="investidores.html">Investidores</a></li>
                <li><a href="contato.html">Contato</a></li>
                <li><a href="login.html">Login</a></li>
                <li><a href="register.html" class="cadastro-button">Cadastrar</a></li>
            </ul>
        </nav>

        <!-- Para Usuários Logados -->
        <nav class="navbar" id="header-logado" style="display: none;">
            <div class="logo">
                <h1><a href="dashboard.html">Investimento Security</a></h1>
            </div>
            <div class="menu-icon" id="menu-icon">
                <img src="Fotos/menu preto.png" alt="Menu">
            </div>
            <ul class="nav-list" id="nav-list-logado">
                <li><a href="dashboard.html">Dashboard</a></li>

                <!-- Submenu de Investimentos -->
                <li class="dropdown">
                    <a href="#">Investimentos</a>
                    <ul class="dropdown-menu">
                        <li><a href="acoes-garantidas.html">Ações Garantidas</a></li>
                        <li><a href="acoes-nao-garantidas.html">Ações Não Garantidas</a></li>
                        <li><a href="comprar-vender.html">Vender/Comprar</a></li>
                    </ul>
                </li>

                <li><a href="depositar.html">Depósito/Saque</a></li>
                
                <!-- Notificações -->
                <li>
                    <a href="notificacoes.html">
                        <img src="Fotos/Icone de notificação 2.png" alt="Notificações" class="icone-notificacoes">
                    </a>
                </li>
                
                <li><a href="suporte.html">Suporte</a></li>
                
                <!-- Ícone do Perfil com Dropdown -->
                <li class="dropdown perfil-usuario">
                    <a href="#">
                        <img src="Fotos/Icone de perfil.png" alt="Perfil" class="icone-usuario">
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="meu-perfil.html">Perfil</a></li>
                        <li><a href="configuracoes.html">CG</a></li>
                        <li><button id="logout-btn" class="logout-button">Sair</button></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Banner Inicial -->
    <section class="banner">
        <div class="banner-content">
            <h1>Invista no Futuro com Segurança e Inovação</h1>
            <div class="cta-buttons">
                <a href="register.html" class="cta-button">Cadastre-se Agora</a>
                <a href="como-funciona.html" class="cta-button">Como Funciona</a>
                <a href="acoes.html" class="cta-button">Conheça Nossas Ações</a>
            </div>
        </div>
    </section>

    <!-- Seção Nossos Diferenciais -->
    <section class="destaques">
        <h2>Nossos Diferenciais</h2>
        <div class="diferenciais">
            <div class="diferencial-item">
                <img src="Fotos/pngwing.com.png" alt="Segurança Garantida">
                <h3>Segurança Garantida</h3>
                <p>Nossos sistemas são seguros e confiáveis.</p>
            </div>
            <div class="diferencial-item">
                <img src="Fotos/Innovation free icons designed by Freepik.jpeg" alt="Inovação">
                <h3>Inovações em Trading</h3>
                <p>Trabalhamos com as melhores tecnologias.</p>
            </div>
            <div class="diferencial-item">
                <img src="Fotos/24.png" alt="Suporte 24/7">
                <h3>Suporte 24/7</h3>
                <p>Suporte ao cliente disponível sempre que precisar.</p>
            </div>
        </div>
    </section>

    <!-- Rodapé -->
    <footer>
        <div class="footer-container">
            <!-- Footer Content -->
        </div>
        <div class="footer-bottom">
            &copy; 2024 Investimento Security. Todos os direitos reservados.
        </div>
    </footer>

    <script src="pasta_js/index.js"></script>

    <!-- Script para gerenciar o logout e exibição do menu -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const headerLogado = document.getElementById('header-logado');
            const headerNaoLogado = document.getElementById('header-nao-logado');

            // Verifica o estado de login do usuário via chamada para o servidor
            fetch('/meu-perfil', { 
                method: 'GET', 
                credentials: 'include' // Inclui cookies na requisição
            })
            .then(response => {
                if (response.ok) {
                    // O usuário está logado, exibe o menu logado
                    headerLogado.style.display = 'flex';
                    headerNaoLogado.style.display = 'none';
                } else {
                    // O usuário não está logado, exibe o menu não logado
                    headerLogado.style.display = 'none';
                    headerNaoLogado.style.display = 'flex';
                }
            })
            .catch(error => {
                console.error('Erro ao verificar login:', error);
                // Exibir o menu de não logado em caso de erro
                headerLogado.style.display = 'none';
                headerNaoLogado.style.display = 'flex';
            });

            // Script de logout
            document.getElementById('logout-btn').addEventListener('click', function() {
                fetch('/logout', {
                    method: 'POST',
                    credentials: 'include', // Inclui cookies na requisição
                })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '/index.html';
                    } else {
                        alert('Erro ao fazer logout. Tente novamente.');
                    }
                })
                .catch(error => {
                    console.error('Erro ao fazer logout:', error);
                });
            });
        });
    </script>
</body>
</html>
